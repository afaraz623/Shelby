ARM GAS  /tmp/cczKKcYm.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"pc_freertos.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.rodata.start_uros_task.str1.4,"aMS",%progbits,1
  20              		.align	2
  21              	.LC0:
  22 0000 4572726F 		.ascii	"Error on default allocators (line %d)\012\000"
  22      72206F6E 
  22      20646566 
  22      61756C74 
  22      20616C6C 
  23 0027 00       		.align	2
  24              	.LC1:
  25 0028 00       		.ascii	"\000"
  26 0029 000000   		.align	2
  27              	.LC2:
  28 002c 726D735F 		.ascii	"rms_node\000"
  28      6E6F6465 
  28      00
  29 0035 000000   		.align	2
  30              	.LC3:
  31 0038 74657374 		.ascii	"test_node\000"
  31      5F6E6F64 
  31      6500
  32 0042 0000     		.align	2
  33              	.LC4:
  34 0044 48656C6C 		.ascii	"Hello World: %ld\000"
  34      6F20576F 
  34      726C643A 
  34      20256C64 
  34      00
  35              		.section	.text.start_uros_task,"ax",%progbits
  36              		.align	1
  37              		.global	start_uros_task
  38              		.syntax unified
  39              		.thumb
  40              		.thumb_func
  42              	start_uros_task:
  43              	.LVL0:
  44              	.LFB138:
  45              		.file 1 "../proc_com_self/src/pc_freertos.c"
   1:../proc_com_self/src/pc_freertos.c **** #include <rmw_microros/rmw_microros.h>
ARM GAS  /tmp/cczKKcYm.s 			page 2


   2:../proc_com_self/src/pc_freertos.c **** #include <rmw_microxrcedds_c/config.h>
   3:../proc_com_self/src/pc_freertos.c **** #include <uxr/client/transport.h>
   4:../proc_com_self/src/pc_freertos.c **** #include <std_msgs/msg/string.h>
   5:../proc_com_self/src/pc_freertos.c **** #include <rcl/error_handling.h>
   6:../proc_com_self/src/pc_freertos.c **** #include <rclc/executor.h>
   7:../proc_com_self/src/pc_freertos.c **** #include <rclc/rclc.h>
   8:../proc_com_self/src/pc_freertos.c **** #include <FreeRTOS.h>
   9:../proc_com_self/src/pc_freertos.c **** #include <cmsis_os.h>
  10:../proc_com_self/src/pc_freertos.c **** #include <stdbool.h>
  11:../proc_com_self/src/pc_freertos.c **** #include <rcl/rcl.h>
  12:../proc_com_self/src/pc_freertos.c **** #include <unistd.h>
  13:../proc_com_self/src/pc_freertos.c **** #include <usart.h>
  14:../proc_com_self/src/pc_freertos.c **** #include <stdio.h>
  15:../proc_com_self/src/pc_freertos.c **** #include <main.h>
  16:../proc_com_self/src/pc_freertos.c **** #include <stdint.h>
  17:../proc_com_self/src/pc_freertos.c **** 
  18:../proc_com_self/src/pc_freertos.c **** /******************************* Aliases **************************************/
  19:../proc_com_self/src/pc_freertos.c **** #define BUF_SIZE 128
  20:../proc_com_self/src/pc_freertos.c **** 
  21:../proc_com_self/src/pc_freertos.c **** /****************************** Global Variables ******************************/
  22:../proc_com_self/src/pc_freertos.c **** 
  23:../proc_com_self/src/pc_freertos.c **** /********************************* Prototypes ********************************/
  24:../proc_com_self/src/pc_freertos.c **** extern bool cubemx_transport_open(struct uxrCustomTransport *transport);
  25:../proc_com_self/src/pc_freertos.c **** extern bool cubemx_transport_close(struct uxrCustomTransport *transport);
  26:../proc_com_self/src/pc_freertos.c **** extern size_t cubemx_transport_write(struct uxrCustomTransport *transport, const uint8_t *buf, size
  27:../proc_com_self/src/pc_freertos.c **** extern size_t cubemx_transport_read(struct uxrCustomTransport *transport, uint8_t *buf, size_t len,
  28:../proc_com_self/src/pc_freertos.c **** extern void microros_deallocate(void *pointer, void *state);
  29:../proc_com_self/src/pc_freertos.c **** extern void *microros_allocate(size_t size, void *state);
  30:../proc_com_self/src/pc_freertos.c **** extern void *microros_reallocate(void *pointer, size_t size, void *state);
  31:../proc_com_self/src/pc_freertos.c **** extern void *microros_zero_allocate(size_t number_of_elements, size_t size_of_element, void *state)
  32:../proc_com_self/src/pc_freertos.c **** 
  33:../proc_com_self/src/pc_freertos.c **** /* This task creates and handles the execution of ros node */
  34:../proc_com_self/src/pc_freertos.c **** void start_uros_task(void *argument)
  35:../proc_com_self/src/pc_freertos.c **** {
  46              		.loc 1 35 1 view -0
  47              		.cfi_startproc
  48              		@ args = 0, pretend = 0, frame = 144
  49              		@ frame_needed = 0, uses_anonymous_args = 0
  50              		.loc 1 35 1 is_stmt 0 view .LVU1
  51 0000 10B5     		push	{r4, lr}
  52              	.LCFI0:
  53              		.cfi_def_cfa_offset 8
  54              		.cfi_offset 4, -8
  55              		.cfi_offset 14, -4
  56 0002 A6B0     		sub	sp, sp, #152
  57              	.LCFI1:
  58              		.cfi_def_cfa_offset 160
  36:../proc_com_self/src/pc_freertos.c ****     rmw_uros_set_custom_transport(true, (void *)&huart1, cubemx_transport_open, cubemx_transport_cl
  59              		.loc 1 36 5 is_stmt 1 view .LVU2
  60 0004 2E4B     		ldr	r3, .L6
  61 0006 0193     		str	r3, [sp, #4]
  62 0008 2E4B     		ldr	r3, .L6+4
  63 000a 0093     		str	r3, [sp]
  64 000c 2E4B     		ldr	r3, .L6+8
  65 000e 2F4A     		ldr	r2, .L6+12
  66 0010 2F49     		ldr	r1, .L6+16
  67 0012 0120     		movs	r0, #1
ARM GAS  /tmp/cczKKcYm.s 			page 3


  68              	.LVL1:
  69              		.loc 1 36 5 is_stmt 0 view .LVU3
  70 0014 FFF7FEFF 		bl	rmw_uros_set_custom_transport
  71              	.LVL2:
  37:../proc_com_self/src/pc_freertos.c **** 
  38:../proc_com_self/src/pc_freertos.c ****     rcl_allocator_t freeRTOS_allocator = rcutils_get_zero_initialized_allocator();
  72              		.loc 1 38 5 is_stmt 1 view .LVU4
  73              		.loc 1 38 42 is_stmt 0 view .LVU5
  74 0018 21A8     		add	r0, sp, #132
  75 001a FFF7FEFF 		bl	rcutils_get_zero_initialized_allocator
  76              	.LVL3:
  39:../proc_com_self/src/pc_freertos.c ****     freeRTOS_allocator.allocate = microros_allocate;
  77              		.loc 1 39 5 is_stmt 1 view .LVU6
  78              		.loc 1 39 33 is_stmt 0 view .LVU7
  79 001e 2D4B     		ldr	r3, .L6+20
  80 0020 2193     		str	r3, [sp, #132]
  40:../proc_com_self/src/pc_freertos.c ****     freeRTOS_allocator.deallocate = microros_deallocate;
  81              		.loc 1 40 5 is_stmt 1 view .LVU8
  82              		.loc 1 40 35 is_stmt 0 view .LVU9
  83 0022 2D4B     		ldr	r3, .L6+24
  84 0024 2293     		str	r3, [sp, #136]
  41:../proc_com_self/src/pc_freertos.c ****     freeRTOS_allocator.reallocate = microros_reallocate;
  85              		.loc 1 41 5 is_stmt 1 view .LVU10
  86              		.loc 1 41 35 is_stmt 0 view .LVU11
  87 0026 2D4B     		ldr	r3, .L6+28
  88 0028 2393     		str	r3, [sp, #140]
  42:../proc_com_self/src/pc_freertos.c ****     freeRTOS_allocator.zero_allocate = microros_zero_allocate;
  89              		.loc 1 42 5 is_stmt 1 view .LVU12
  90              		.loc 1 42 38 is_stmt 0 view .LVU13
  91 002a 2D4B     		ldr	r3, .L6+32
  92 002c 2493     		str	r3, [sp, #144]
  43:../proc_com_self/src/pc_freertos.c **** 
  44:../proc_com_self/src/pc_freertos.c ****     if (!rcutils_set_default_allocator(&freeRTOS_allocator))
  93              		.loc 1 44 5 is_stmt 1 view .LVU14
  94              		.loc 1 44 10 is_stmt 0 view .LVU15
  95 002e 21A8     		add	r0, sp, #132
  96 0030 FFF7FEFF 		bl	rcutils_set_default_allocator
  97              	.LVL4:
  98              		.loc 1 44 8 view .LVU16
  99 0034 0028     		cmp	r0, #0
 100 0036 3ED0     		beq	.L5
 101              	.L2:
  45:../proc_com_self/src/pc_freertos.c ****     {
  46:../proc_com_self/src/pc_freertos.c ****         printf("Error on default allocators (line %d)\n", __LINE__);
  47:../proc_com_self/src/pc_freertos.c ****     }
  48:../proc_com_self/src/pc_freertos.c **** 
  49:../proc_com_self/src/pc_freertos.c ****     // micro-ROS app
  50:../proc_com_self/src/pc_freertos.c ****     std_msgs__msg__String msg;
 102              		.loc 1 50 5 is_stmt 1 view .LVU17
  51:../proc_com_self/src/pc_freertos.c **** 
  52:../proc_com_self/src/pc_freertos.c ****     rcl_allocator_t allocator;
 103              		.loc 1 52 5 view .LVU18
  53:../proc_com_self/src/pc_freertos.c ****     allocator = rcl_get_default_allocator();
 104              		.loc 1 53 5 view .LVU19
 105              		.loc 1 53 17 is_stmt 0 view .LVU20
 106 0038 02A8     		add	r0, sp, #8
 107 003a FFF7FEFF 		bl	rcutils_get_default_allocator
ARM GAS  /tmp/cczKKcYm.s 			page 4


 108              	.LVL5:
 109 003e 0DF1640C 		add	ip, sp, #100
 110 0042 02AC     		add	r4, sp, #8
 111 0044 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 112 0046 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 113 004a 2368     		ldr	r3, [r4]
 114 004c CCF80030 		str	r3, [ip]
  54:../proc_com_self/src/pc_freertos.c **** 
  55:../proc_com_self/src/pc_freertos.c ****     rclc_support_t support;
 115              		.loc 1 55 5 is_stmt 1 view .LVU21
  56:../proc_com_self/src/pc_freertos.c ****     rclc_support_init(&support, 0, NULL, &allocator);
 116              		.loc 1 56 5 view .LVU22
 117 0050 19AB     		add	r3, sp, #100
 118 0052 0022     		movs	r2, #0
 119 0054 1146     		mov	r1, r2
 120 0056 0CA8     		add	r0, sp, #48
 121 0058 FFF7FEFF 		bl	rclc_support_init
 122              	.LVL6:
  57:../proc_com_self/src/pc_freertos.c **** 
  58:../proc_com_self/src/pc_freertos.c ****     rcl_node_t node;
 123              		.loc 1 58 5 view .LVU23
  59:../proc_com_self/src/pc_freertos.c ****     rclc_node_init_default(&node, "rms_node", "", &support);
 124              		.loc 1 59 5 view .LVU24
 125 005c 0CAB     		add	r3, sp, #48
 126 005e 214A     		ldr	r2, .L6+36
 127 0060 2149     		ldr	r1, .L6+40
 128 0062 0AA8     		add	r0, sp, #40
 129 0064 FFF7FEFF 		bl	rclc_node_init_default
 130              	.LVL7:
  60:../proc_com_self/src/pc_freertos.c **** 
  61:../proc_com_self/src/pc_freertos.c ****     rcl_publisher_t publisher;
 131              		.loc 1 61 5 view .LVU25
  62:../proc_com_self/src/pc_freertos.c ****     rclc_publisher_init_default(&publisher, &node, ROSIDL_GET_MSG_TYPE_SUPPORT(std_msgs, msg, Strin
 132              		.loc 1 62 5 view .LVU26
 133 0068 FFF7FEFF 		bl	rosidl_typesupport_c__get_message_type_support_handle__std_msgs__msg__String
 134              	.LVL8:
 135 006c 0246     		mov	r2, r0
 136 006e 1F4B     		ldr	r3, .L6+44
 137 0070 0AA9     		add	r1, sp, #40
 138 0072 09A8     		add	r0, sp, #36
 139 0074 FFF7FEFF 		bl	rclc_publisher_init_default
 140              	.LVL9:
  63:../proc_com_self/src/pc_freertos.c **** 
  64:../proc_com_self/src/pc_freertos.c ****     std_msgs__msg__String__init(&msg);
 141              		.loc 1 64 5 view .LVU27
 142 0078 1EA8     		add	r0, sp, #120
 143 007a FFF7FEFF 		bl	std_msgs__msg__String__init
 144              	.LVL10:
  65:../proc_com_self/src/pc_freertos.c ****     msg.data.data = malloc(BUF_SIZE);
 145              		.loc 1 65 5 view .LVU28
 146              		.loc 1 65 21 is_stmt 0 view .LVU29
 147 007e 8020     		movs	r0, #128
 148 0080 FFF7FEFF 		bl	malloc
 149              	.LVL11:
 150              		.loc 1 65 19 view .LVU30
 151 0084 1E90     		str	r0, [sp, #120]
  66:../proc_com_self/src/pc_freertos.c ****     msg.data.capacity = BUF_SIZE;
ARM GAS  /tmp/cczKKcYm.s 			page 5


 152              		.loc 1 66 5 is_stmt 1 view .LVU31
 153              		.loc 1 66 23 is_stmt 0 view .LVU32
 154 0086 8023     		movs	r3, #128
 155 0088 2093     		str	r3, [sp, #128]
  67:../proc_com_self/src/pc_freertos.c **** 
  68:../proc_com_self/src/pc_freertos.c ****     int counter = 0;
 156              		.loc 1 68 5 is_stmt 1 view .LVU33
 157              	.LVL12:
 158              		.loc 1 68 9 is_stmt 0 view .LVU34
 159 008a 0023     		movs	r3, #0
 160              	.LVL13:
 161              	.L3:
  69:../proc_com_self/src/pc_freertos.c **** 
  70:../proc_com_self/src/pc_freertos.c ****     while (1)
 162              		.loc 1 70 5 is_stmt 1 discriminator 1 view .LVU35
  71:../proc_com_self/src/pc_freertos.c ****     {
  72:../proc_com_self/src/pc_freertos.c ****         snprintf(msg.data.data, msg.data.capacity, "Hello World: %ld", counter++);
 163              		.loc 1 72 9 discriminator 1 view .LVU36
 164 008c 5C1C     		adds	r4, r3, #1
 165              	.LVL14:
 166              		.loc 1 72 9 is_stmt 0 discriminator 1 view .LVU37
 167 008e 184A     		ldr	r2, .L6+48
 168 0090 2099     		ldr	r1, [sp, #128]
 169 0092 1E98     		ldr	r0, [sp, #120]
 170 0094 FFF7FEFF 		bl	snprintf
 171              	.LVL15:
  73:../proc_com_self/src/pc_freertos.c ****         msg.data.size = strlen(msg.data.data);
 172              		.loc 1 73 9 is_stmt 1 discriminator 1 view .LVU38
 173              		.loc 1 73 25 is_stmt 0 discriminator 1 view .LVU39
 174 0098 1E98     		ldr	r0, [sp, #120]
 175 009a FFF7FEFF 		bl	strlen
 176              	.LVL16:
 177              		.loc 1 73 23 discriminator 1 view .LVU40
 178 009e 1F90     		str	r0, [sp, #124]
  74:../proc_com_self/src/pc_freertos.c ****         rcl_publish(&publisher, &msg, NULL);
 179              		.loc 1 74 9 is_stmt 1 discriminator 1 view .LVU41
 180 00a0 0022     		movs	r2, #0
 181 00a2 1EA9     		add	r1, sp, #120
 182 00a4 09A8     		add	r0, sp, #36
 183 00a6 FFF7FEFF 		bl	rcl_publish
 184              	.LVL17:
  75:../proc_com_self/src/pc_freertos.c ****         osDelay(1000);
 185              		.loc 1 75 9 discriminator 1 view .LVU42
 186 00aa 4FF47A70 		mov	r0, #1000
 187 00ae FFF7FEFF 		bl	osDelay
 188              	.LVL18:
  70:../proc_com_self/src/pc_freertos.c ****     {
 189              		.loc 1 70 11 discriminator 1 view .LVU43
  72:../proc_com_self/src/pc_freertos.c ****         msg.data.size = strlen(msg.data.data);
 190              		.loc 1 72 9 is_stmt 0 discriminator 1 view .LVU44
 191 00b2 2346     		mov	r3, r4
 192 00b4 EAE7     		b	.L3
 193              	.LVL19:
 194              	.L5:
  46:../proc_com_self/src/pc_freertos.c ****     }
 195              		.loc 1 46 9 is_stmt 1 view .LVU45
 196 00b6 2E21     		movs	r1, #46
ARM GAS  /tmp/cczKKcYm.s 			page 6


 197 00b8 0E48     		ldr	r0, .L6+52
 198 00ba FFF7FEFF 		bl	printf
 199              	.LVL20:
 200 00be BBE7     		b	.L2
 201              	.L7:
 202              		.align	2
 203              	.L6:
 204 00c0 00000000 		.word	cubemx_transport_read
 205 00c4 00000000 		.word	cubemx_transport_write
 206 00c8 00000000 		.word	cubemx_transport_close
 207 00cc 00000000 		.word	cubemx_transport_open
 208 00d0 00000000 		.word	huart1
 209 00d4 00000000 		.word	microros_allocate
 210 00d8 00000000 		.word	microros_deallocate
 211 00dc 00000000 		.word	microros_reallocate
 212 00e0 00000000 		.word	microros_zero_allocate
 213 00e4 28000000 		.word	.LC1
 214 00e8 2C000000 		.word	.LC2
 215 00ec 38000000 		.word	.LC3
 216 00f0 44000000 		.word	.LC4
 217 00f4 00000000 		.word	.LC0
 218              		.cfi_endproc
 219              	.LFE138:
 221              		.text
 222              	.Letext0:
 223              		.file 2 "/opt/gcc-arm-none-eabi-10.3-2021.10/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 224              		.file 3 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/machine/_default_types.h"
 225              		.file 4 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/sys/_stdint.h"
 226              		.file 5 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcutils/
 227              		.file 6 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcutils/
 228              		.file 7 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rmw/ret_
 229              		.file 8 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rmw/time
 230              		.file 9 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rmw/type
 231              		.file 10 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rmw/qos
 232              		.file 11 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rosidl_
 233              		.file 12 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/std_msg
 234              		.file 13 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcl/all
 235              		.file 14 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcl/typ
 236              		.file 15 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcl/con
 237              		.file 16 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcl/nod
 238              		.file 17 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcl/tim
 239              		.file 18 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcl/pub
 240              		.file 19 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rcl_act
 241              		.file 20 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rclc/ty
 242              		.file 21 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f429xx.h"
 243              		.file 22 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 244              		.file 23 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 245              		.file 24 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 246              		.file 25 "Core/Inc/usart.h"
 247              		.file 26 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rmw_mic
 248              		.file 27 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rclc/in
 249              		.file 28 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rclc/no
 250              		.file 29 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/std_msg
 251              		.file 30 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/rclc/pu
 252              		.file 31 "micro_ros_stm32cubemx_utils/microros_static_library/libmicroros/microros_include/std_msg
 253              		.file 32 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/stdlib.h"
 254              		.file 33 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/stdio.h"
ARM GAS  /tmp/cczKKcYm.s 			page 7


 255              		.file 34 "/opt/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/string.h"
 256              		.file 35 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
ARM GAS  /tmp/cczKKcYm.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 pc_freertos.c
     /tmp/cczKKcYm.s:20     .rodata.start_uros_task.str1.4:0000000000000000 $d
     /tmp/cczKKcYm.s:36     .text.start_uros_task:0000000000000000 $t
     /tmp/cczKKcYm.s:42     .text.start_uros_task:0000000000000000 start_uros_task
     /tmp/cczKKcYm.s:204    .text.start_uros_task:00000000000000c0 $d

UNDEFINED SYMBOLS
rmw_uros_set_custom_transport
rcutils_get_zero_initialized_allocator
rcutils_set_default_allocator
rcutils_get_default_allocator
rclc_support_init
rclc_node_init_default
rosidl_typesupport_c__get_message_type_support_handle__std_msgs__msg__String
rclc_publisher_init_default
std_msgs__msg__String__init
malloc
snprintf
strlen
rcl_publish
osDelay
printf
cubemx_transport_read
cubemx_transport_write
cubemx_transport_close
cubemx_transport_open
huart1
microros_allocate
microros_deallocate
microros_reallocate
microros_zero_allocate
